# Phase 6 Plan 01: LinkedIn Auto-Discovery and Deep Enrichment Pipeline

## Goal
Automatically find candidate's LinkedIn profile from GitHub data using AI-powered matching, and enrich profiles with parallel multi-source data collection.

## Design Document
See: `docs/plans/2026-01-25-linkedin-auto-discovery-design.md`

## Tasks

### Task 1: Enrichment Library Core âœ“
**Status**: Complete
**Files**:
- `lib/enrichment/index.ts` - Module exports
- `lib/enrichment/githubEnrichment.ts` - README, PRs to others, contribution patterns
- `lib/enrichment/linkedinFinder.ts` - Hybrid Googleâ†’BrightData search with AI ranking
- `lib/enrichment/websiteEnrichment.ts` - Firecrawl personal site scraping
- `lib/enrichment/talksEnrichment.ts` - Conference talk/YouTube search

**What it does**:
- `enrichFromGitHub()` - Fetches profile README, PRs to other repos, contribution patterns, topics
- `findLinkedInProfile()` - Searches Google first, falls back to BrightData, ranks with OpenRouter AI
- `enrichFromWebsite()` - Scrapes personal site for topics, projects, blog posts
- `enrichFromTalks()` - Searches for conference talks and YouTube videos

### Task 2: Deep Enrichment API âœ“
**Status**: Complete
**Files**:
- `app/api/deep-enrichment/route.ts` - Orchestrates parallel enrichment

**What it does**:
- Receives username and GitHub profile
- Launches all 4 enrichment sources in parallel
- Returns aggregated results with status indicators
- Handles failures gracefully (partial results OK)

### Task 3: LinkedIn Finder API âœ“
**Status**: Complete
**Files**:
- `app/api/linkedin-finder/route.ts` - Standalone LinkedIn search endpoint

**What it does**:
- Takes GitHub profile, returns ranked LinkedIn matches
- Hybrid search: Google via Firecrawl â†’ BrightData fallback
- AI confidence scoring via OpenRouter

### Task 4: Profile Page UI - Auto-Discovery âœ“
**Status**: Complete
**Files**:
- `app/profile/[username]/page.tsx`

**What it does**:
- Add state for LinkedIn finder (suggestions, finding status)
- Add `handleFindLinkedIn()` function that calls `/api/linkedin-finder`
- Update LinkedIn bar to show:
  - "Finding LinkedIn..." when searching
  - Match result with confidence: "John Smith - Dev at Acme (92%)" [Use This] [Not them]
  - Top 3 suggestions for low confidence matches
- Auto-trigger when clicking Deep Profile or Connection Path without LinkedIn set
- Auto-accept and proceed for â‰¥90% confidence matches

### Task 5: Deep Profile Page - Progressive Loading âœ“
**Status**: Complete
**Files**:
- `app/profile/[username]/deep/page.tsx`

**What it does**:
- Call `/api/deep-enrichment` on page load
- Show progressive loading UI with source status:
  - "GitHub âœ“" / "GitHub ðŸ”„" / "GitHub âœ—"
  - "LinkedIn âœ“" / "LinkedIn ðŸ”„" / "LinkedIn âœ—"
  - "Website âœ“" / "Website ðŸ”„" / "Website âœ—"
  - "Talks âœ“" / "Talks ðŸ”„" / "Talks âœ—"
- Display enrichment data as it arrives
- Feed all collected data into AI persona/analysis generation

### Task 6: Integration Testing
**Status**: Not started
**Files**:
- `tests/e2e/linkedin-discovery.spec.ts`

**What it does**:
- Test auto-discovery flow with mocked API responses
- Verify confidence thresholds (auto-accept, show options, manual input)
- Test progressive loading UI
- Verify parallel enrichment completes within timeout

## Dependencies

**Required API Keys**:
- `OPENROUTER_API_KEY` - AI matching and synthesis
- `FIRECRAWL_API_KEY` - Google search and website scraping
- `BRIGHTDATA_API_KEY` - LinkedIn search fallback and profile scraping
- `GITHUB_TOKEN` - Extended GitHub API access

## Success Criteria

1. [ ] LinkedIn found automatically for >70% of GitHub profiles with real names
2. [ ] â‰¥90% confidence matches auto-accepted without user intervention
3. [ ] Total enrichment time <30 seconds (parallel fetching)
4. [ ] Progressive UI shows status for each source
5. [ ] Graceful degradation when sources fail (partial results still useful)

## Progress

| Task | Status | Notes |
|------|--------|-------|
| 1. Enrichment Library Core | âœ“ Complete | 4 modules created |
| 2. Deep Enrichment API | âœ“ Complete | Parallel orchestration |
| 3. LinkedIn Finder API | âœ“ Complete | Hybrid search |
| 4. Profile Page UI | âœ“ Complete | Find button, suggestions, auto-accept |
| 5. Deep Profile Page | âœ“ Complete | Data Sources status bar |
| 6. Integration Testing | Not started | - |

---
*Plan created: 2026-01-25*
