---
phase: 02-bug-fixes
plan: 04
type: execute
wave: 2
depends_on: ["02-01", "02-02", "02-03"]
files_modified:
  - various (eslint auto-fix)
autonomous: false

must_haves:
  truths:
    - "All critical React errors (set-state-in-effect, component-creation, immutability, ref-access) are fixed"
    - "ESLint auto-fixable issues (unused imports, prefer-const) are cleaned up"
    - "E2E test suite passes with 100% success rate (30/30 tests)"
    - "TypeScript type-check passes"
    - "Application builds successfully"
  artifacts:
    - path: "various files"
      provides: "Clean ESLint output for critical rules"
      pattern: "0 problems"
  key_links:
    - from: "npm run lint"
      to: "critical error count"
      via: "grep for critical rules"
      pattern: "0.*(set-state|Cannot create|immutability|Cannot access)"
---

<objective>
Final verification and cleanup of bug fixes

Purpose: Verify all critical React bugs are fixed, run auto-fix for low-priority issues, and confirm E2E tests still pass. This ensures the bug fix phase is complete and demo flows work without crashes.

Output: Verified clean codebase with passing E2E tests
</objective>

<execution_context>
@/home/sven/.claude/get-shit-done/workflows/execute-plan.md
@/home/sven/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/02-bug-fixes/02-RESEARCH.md
@.planning/phases/02-bug-fixes/02-01-SUMMARY.md
@.planning/phases/02-bug-fixes/02-02-SUMMARY.md
@.planning/phases/02-bug-fixes/02-03-SUMMARY.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Verify critical React errors are fixed</name>
  <files>N/A (verification only)</files>
  <action>
Run ESLint and count critical React errors:

```bash
# Count critical errors (should be 0 for production files, ignoring -bak/ directories)
npm run lint 2>&1 | grep -v "bak/" | grep -E "(set-state-in-effect|Cannot create components|immutability|Cannot access refs)" | wc -l
```

Expected: 0 (or only documented exceptions with eslint-disable comments)

If any critical errors remain, document which files and what pattern. Do NOT auto-fix these - they require the specific patterns from plans 01-03.

Also verify:
```bash
npm run type-check
npm run build
```

Both should pass without errors.
  </action>
  <verify>
- `npm run lint 2>&1 | grep -v "bak/" | grep -cE "(set-state-in-effect|Cannot create components|immutability|Cannot access refs)"` returns 0
- `npm run type-check` exits 0
- `npm run build` exits 0
  </verify>
  <done>Zero critical React errors in production code. TypeScript and build both pass.</done>
</task>

<task type="auto">
  <name>Task 2: Run ESLint auto-fix for low-priority issues</name>
  <files>various (eslint --fix target files)</files>
  <action>
ESLint reported "4 errors and 17 warnings potentially fixable with the `--fix` option."

These are low-priority issues:
- Unused imports
- prefer-const violations

Run auto-fix:
```bash
npm run lint:fix
```

This will automatically:
- Remove unused imports
- Change `let` to `const` where variable is never reassigned
- Other auto-fixable patterns

After running, verify the fix didn't break anything:
```bash
npm run type-check
npm run build
```
  </action>
  <verify>
- `npm run lint:fix` completes without errors
- `npm run type-check` passes
- `npm run build` passes
  </verify>
  <done>Auto-fixable ESLint issues resolved. Unused imports removed, const usage corrected.</done>
</task>

<task type="auto">
  <name>Task 3: Run E2E test suite</name>
  <files>N/A (test execution only)</files>
  <action>
Run the full E2E test suite to verify bug fixes didn't break any user flows:

```bash
npm run test:e2e
```

Expected: 30 tests pass (same as Phase 1 verification).

If any tests fail:
1. Document which tests failed
2. Identify if the failure is related to bug fixes (likely not - fixes are internal patterns)
3. Fix any regressions

The test suite should complete in under 20 seconds with 0 failures.
  </action>
  <verify>`npm run test:e2e` shows "30 passed" with 0 failures</verify>
  <done>E2E test suite passes with 100% success rate. Bug fixes did not introduce regressions.</done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>
All critical React bugs fixed:
- Component extraction (SearchFilters, NetworkGraphView)
- Next.js router usage (pricing page)
- State initialization patterns (contexts, hooks, components)
- ESLint auto-fixes applied
  </what-built>
  <how-to-verify>
1. Start the dev server: `npm run dev`
2. Test critical demo flows:
   a. Visit http://localhost:3000/intake - load a demo job
   b. Navigate to Search - run a search
   c. Add candidate to pipeline
   d. View candidate profile
   e. Generate outreach message
3. Check browser console for React warnings/errors
4. Verify no visual regressions or broken interactions
  </how-to-verify>
  <resume-signal>Type "approved" if demo flows work without console errors, or describe any issues found</resume-signal>
</task>

</tasks>

<verification>
Phase 2 complete when:
1. Zero critical ESLint errors (excluding -bak/ directories)
2. E2E tests: 30/30 passing
3. TypeScript type-check: passing
4. Build: successful
5. Manual verification: demo flows work, no console errors
</verification>

<success_criteria>
- All bugs identified in 02-RESEARCH.md Priority 1 are fixed
- ESLint critical error count: 0 (for production files)
- E2E test success rate: 100% (30/30)
- No regressions in user-visible functionality
- Demo flows work end-to-end without crashes
</success_criteria>

<output>
After completion, create `.planning/phases/02-bug-fixes/02-04-SUMMARY.md`
</output>
